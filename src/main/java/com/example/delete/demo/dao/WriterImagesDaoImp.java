package com.example.delete.demo.dao;


import com.example.delete.demo.dao.pojo.Base64Image;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Repository;
import org.springframework.web.multipart.MultipartFile;

import javax.xml.bind.DatatypeConverter;
import java.io.*;


@Repository
public class WriterImagesDaoImp implements WriterImagesDao {
    @Value("${upload.path}")
    private String pathUpload;

    private static String FILE_BASE = "data:image/png;base64,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";


    @Override
    public void upload(MultipartFile image) {
        File dirUpload = getDirUpload();
        try {
            image.transferTo(new File(dirUpload.getAbsolutePath() + File.separator + image.getOriginalFilename()));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void upload(Base64Image base64Image) {
        File dirUpload = getDirUpload();
        byte[] decodedBytes = DatatypeConverter.parseBase64Binary(fixEncoded(FILE_BASE));
        try (OutputStream outputStream = new BufferedOutputStream(new FileOutputStream(dirUpload.getAbsoluteFile() + File.separator + base64Image.getName()))) {
            outputStream.write(decodedBytes);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private File getDirUpload() {
        File dirUpload = new File(pathUpload);
        if (!dirUpload.exists()) {
            dirUpload.mkdir();
        }
        return dirUpload;
    }

    private String fixEncoded(String encoded) {
        String fixEncoded = "";
        if (encoded != null) {
            String[] splitEncoded = encoded.split(",");
            fixEncoded = splitEncoded[1];
        }
        return fixEncoded;
    }

    public String getPathUpload() {
        return pathUpload;
    }

    public void setPathUpload(String pathUpload) {
        this.pathUpload = pathUpload;
    }
}
